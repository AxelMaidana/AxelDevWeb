<nav
    id="main-nav"
    class="fixed top-0 left-0 w-full z-50 flex justify-center mt-6 px-6 md:px-0 transition-transform duration-500"
>
    <div
        id="nav-inner"
        class="w-full max-w-screen-xl px-4 py-3 flex items-center justify-between border border-transparent rounded-full transition-all duration-500"
    >
        <!-- Logo -->
        <a
            href="#"
            id="nav-logo"
            class="flex items-center gap-3 group cursor-pointer lg:pl-4 transition-transform duration-500"
        >
            <span class="text-base font-semibold text-primary tracking-tight"
                >AxslDev</span
            >
        </a>

        <!-- Links (Hidden mobile) -->
        <div id="nav-links" class="hidden md:flex items-center gap-2">
            <a
                href="#projects"
                class="px-5 py-2.5 rounded-full text-sm font-medium text-secondary hover:text-primary hover:bg-white/5 transition-all"
                >Proyectos</a
            >
            <a
                href="#pricing"
                class="px-5 py-2.5 rounded-full text-sm font-medium text-secondary hover:text-primary hover:bg-white/5 transition-all"
                >Servicios</a
            >
            <a
                href="#stack"
                class="px-5 py-2.5 rounded-full text-sm font-medium text-secondary hover:text-primary hover:bg-white/5 transition-all"
                >Stack</a
            >
        </div>

        <!-- CTA -->
        <div id="nav-cta" class="lg:pr-1 transition-transform duration-500">
            <a
                href="#contact"
                class="hidden sm:flex items-center justify-center bg-primary text-background px-6 py-2.5 rounded-full text-sm font-semibold hover:bg-white hover:scale-105 transition-all shadow-sm"
            >
                Hablemos
            </a>

            <!-- Mobile Menu Icon -->
            <button class="md:hidden text-primary p-2">
                <iconify-icon
                    icon="solar:hamburger-menu-linear"
                    class="text-2xl"></iconify-icon>
            </button>
        </div>
    </div>
</nav>

<script>
    function initNavScroll() {
        const navInner = document.getElementById("nav-inner");
        const navMain = document.getElementById("main-nav");
        if (!navInner || !navMain) return;

        function checkScroll() {
            if (!navInner) return;

            if (window.scrollY > 50) {
                // Scrolled styling (Pastilla)
                navInner.classList.replace("max-w-screen-xl", "max-w-3xl");
                navInner.classList.add(
                    "bg-surface/80",
                    "backdrop-blur-md",
                    "border-white/10",
                    "shadow-lg",
                );
                navInner.classList.remove("border-transparent");

                // Shrink padding
                navInner.classList.replace("py-3", "py-2");
            } else {
                // Top styling
                navInner.classList.replace("max-w-3xl", "max-w-screen-xl");
                navInner.classList.remove(
                    "bg-surface/80",
                    "backdrop-blur-md",
                    "border-white/10",
                    "shadow-lg",
                );
                navInner.classList.add("border-transparent");

                // Original padding
                navInner.classList.replace("py-2", "py-3");
            }
        }

        window.addEventListener("scroll", checkScroll, { passive: true });
        checkScroll(); // Check on mount
    }

    // Run on first load and view transitions
    initNavScroll();
    document.addEventListener("astro:page-load", initNavScroll);
</script>
