---
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import { projectsData } from "../../data/projects";

export function getStaticPaths() {
    return projectsData.map((project) => ({
        params: { id: project.id },
        props: { project },
    }));
}

const { project } = Astro.props;
---

<Layout
    title={`${project.title} | Dev.Identity`}
    description={project.shortDescription}
>
    <!-- Simple, Clean Breadcrumbs -->
    <div
        class="w-full bg-background/80 backdrop-blur-xl pt-32 pb-6 sticky top-0 z-40 border-b border-white/5"
    >
        <div class="max-w-screen-xl mx-auto px-6">
            <nav aria-label="Breadcrumb" data-reveal="fade-in">
                <ol class="flex items-center gap-3 text-sm font-medium">
                    <li>
                        <a
                            href="/"
                            class="text-muted hover:text-primary transition-colors flex items-center gap-1.5"
                        >
                            <iconify-icon
                                icon="solar:home-2-linear"
                                class="text-lg"></iconify-icon>
                            <span>Inicio</span>
                        </a>
                    </li>
                    <li class="text-white/10">/</li>
                    <li>
                        <a
                            href="/#projects"
                            class="text-muted hover:text-primary transition-colors"
                            >Trabajos Seleccionados</a
                        >
                    </li>
                    <li class="text-white/10">/</li>
                    <li class="text-primary font-semibold" aria-current="page">
                        {project.title}
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <main class="min-h-screen bg-background pb-32">
        <!-- Minimal Hero Image Area -->
        <section class="max-w-screen-xl mx-auto px-6 mt-12 mb-20">
            <div
                class="relative h-[60vh] min-h-[500px] w-full rounded-premium border border-white/5 overflow-hidden shadow-premium"
                data-reveal="fade-in"
                data-reveal-delay="100"
            >
                <Image
                    src={project.image}
                    alt={project.title}
                    width={1920}
                    height={1080}
                    loading="eager"
                    decoding="async"
                    class="absolute inset-0 w-full h-full object-cover"
                    transition:name={`project-media-${project.id}`}
                />

                <!-- Beautiful soft blur overlay instead of harsh dark gradient -->
                <div
                    class="absolute inset-0 bg-background/20 backdrop-blur-[2px]"
                >
                </div>

                <div
                    class="absolute inset-0 bg-gradient-to-t from-background/90 via-background/40 to-transparent"
                >
                </div>

                <div
                    class="absolute inset-0 flex flex-col justify-end p-8 md:p-16"
                >
                    <div
                        class="max-w-4xl"
                        data-reveal="fade-up"
                        data-reveal-delay="300"
                    >
                        <div class="flex items-center gap-3 mb-6">
                            <span
                                class="text-xs font-semibold px-4 py-1.5 rounded-full bg-surface-hover/80 backdrop-blur-md border border-white/10 text-primary uppercase tracking-wide"
                            >
                                {project.category}
                            </span>
                            <span
                                class="text-sm font-medium text-muted flex items-center gap-2"
                            >
                                <span class="w-1.5 h-1.5 rounded-full bg-muted"
                                ></span>
                                {project.year}
                            </span>
                        </div>

                        <h1
                            class="text-5xl md:text-6xl lg:text-[5rem] text-primary font-semibold tracking-tight leading-[1.1] mb-6"
                            transition:name={`project-title-${project.id}`}
                        >
                            {project.title}
                        </h1>
                        <p
                            class="text-lg md:text-2xl text-secondary font-normal max-w-2xl leading-relaxed"
                        >
                            {project.shortDescription}
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Details Area -->
        <section class="max-w-screen-xl mx-auto px-6">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12">
                <!-- Sidebar Metadata -->
                <div
                    class="lg:col-span-4 flex flex-col gap-8"
                    data-reveal="fade-up"
                >
                    <div
                        class="bg-surface rounded-premium p-8 border border-white/5 hover:border-white/10 transition-colors"
                    >
                        <h3
                            class="text-sm font-semibold text-primary mb-8 tracking-wide border-b border-white/5 pb-4"
                        >
                            Detalles del Proyecto
                        </h3>
                        <div class="space-y-6">
                            <div>
                                <p
                                    class="text-sm text-muted mb-1.5 font-medium"
                                >
                                    Rol
                                </p>
                                <p class="text-primary font-medium text-lg">
                                    {project.role}
                                </p>
                            </div>
                            <div>
                                <p
                                    class="text-sm text-muted mb-1.5 font-medium"
                                >
                                    Duración
                                </p>
                                <p class="text-primary font-medium text-lg">
                                    {project.duration}
                                </p>
                            </div>
                            <div>
                                <p class="text-sm text-muted mb-3 font-medium">
                                    Stack Tecnológico
                                </p>
                                <div class="flex flex-wrap gap-2">
                                    {
                                        project.technologies.map((tech) => (
                                            <span class="text-xs font-medium border border-white/5 bg-white/5 backdrop-blur-sm text-secondary px-3 py-1.5 rounded-full tracking-wide">
                                                {tech}
                                            </span>
                                        ))
                                    }
                                </div>
                            </div>

                            <!-- Links Area -->
                            <div
                                class="pt-8 mt-2 flex flex-col gap-3 border-t border-white/5"
                            >
                                {
                                    project.liveUrl && (
                                        <a
                                            href={project.liveUrl}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            class="w-full flex items-center justify-center gap-2 bg-primary text-background py-3.5 rounded-full text-sm font-semibold hover:bg-white transition-colors shadow-sm"
                                        >
                                            Explorar Plataforma
                                            <iconify-icon
                                                icon="solar:arrow-right-up-linear"
                                                class="text-lg"
                                            />
                                        </a>
                                    )
                                }
                                {
                                    project.repoUrl && (
                                        <a
                                            href={project.repoUrl}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            class="w-full flex items-center justify-center gap-2 bg-surface-hover/80 backdrop-blur-md border border-white/10 text-primary py-3.5 rounded-full text-sm font-semibold hover:bg-surface transition-colors"
                                        >
                                            <iconify-icon
                                                icon="simple-icons:github"
                                                class="text-lg"
                                            />
                                            Código Fuente
                                        </a>
                                    )
                                }
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Description -->
                <div
                    class="lg:col-span-8 flex flex-col gap-8"
                    data-reveal="fade-up"
                    data-reveal-delay="100"
                >
                    <div
                        class="bg-surface rounded-premium p-8 md:p-12 border border-white/5"
                    >
                        <h3 class="text-lg font-semibold text-primary mb-6">
                            El Desafío y Enfoque
                        </h3>
                        <p
                            class="text-lg text-secondary font-normal leading-relaxed mb-12"
                        >
                            {project.fullDescription}
                        </p>

                        <h4
                            class="text-base font-semibold text-primary mb-6 border-b border-white/5 pb-4"
                        >
                            Logros Clave
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {
                                project.features.map((feature) => (
                                    <div class="bg-surface-hover/50 rounded-premium-inner p-6 hover:bg-surface-hover transition-colors border border-white/5">
                                        <div class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-4">
                                            <iconify-icon
                                                icon="solar:verified-check-linear"
                                                class="text-xl text-primary"
                                            />
                                        </div>
                                        <h5 class="text-base text-primary font-medium mb-2">
                                            {feature.title}
                                        </h5>
                                        <p class="text-sm text-secondary font-normal leading-relaxed">
                                            {feature.description}
                                        </p>
                                    </div>
                                ))
                            }
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</Layout>
